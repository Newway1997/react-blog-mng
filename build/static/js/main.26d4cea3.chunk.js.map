{"version":3,"sources":["api/request.js","pages/Login.jsx","api/articleApi.js","components/ImageModal.jsx","pages/AddArticle.jsx","pages/ArticleList.jsx","api/userApi.js","tools/icons.js","pages/UserInfo.jsx","api/advertApi.js","pages/AdvertMng.jsx","pages/AdminIndex.jsx","pages/Main.jsx","App.js","index.js"],"names":["baseUrl","getBaseUrl","config","url","Error","substring","axios","Login","props","useState","userName","setUserName","password","setPassword","inloading","setInloading","className","tip","spinning","title","bordered","style","width","id","size","placeholder","onChange","e","target","value","type","block","onClick","request","method","data","withCredentials","articleApi","then","res","message","success","localStorage","setItem","openId","history","push","error","imgUrl","setImgUrl","cancelText","okText","visible","onOk","onCancel","span","display","alignItems","paddingRight","justifyContent","name","showUploadList","action","info","file","status","tempUrl","URL","origin","response","beforeUpload","isJpgOrPng","isLt2M","Option","Select","TextArea","Input","renderer","marked","Renderer","AddArticle","articleId","setArticleId","articleTitle","setArticleTitle","articleContent","setArticleContent","markdownContent","setMarkdownContent","introduce","setIntroduce","introducehtml","setIntroducehtml","moment","showDate","setShowDate","typeInfo","setTypeInfo","selectedType","setSelectType","orderIndex","setOrderIndex","getArticleById","articleInfo","article_content","setTimeout","html","tempInt","addTime","typeId","getTypeInfo","removeItem","useEffect","tmpId","match","params","getLocalData","localData","getItem","dataProps","JSON","parse","setVisible","gutter","marginBottom","minWidth","map","item","key","typeName","date","undefined","FileImageOutlined","fontSize","rows","marginLeft","dangerouslySetInnerHTML","__html","unix","stringify","type_id","nowDate","Date","hour","getHours","minute","getMinutes","second","getSeconds","utc","view_count","insertId","isSuccess","marginTop","row","ImageModal","newArticleContent","setOptions","gfm","pedantic","sanitize","tables","breaks","smartLists","highlight","code","hljs","highlightAuto","confirm","Modal","ArticleList","list","setList","getList","delArticle","content","Promise","resolve","reject","header","dataSource","renderItem","Item","marginRight","getUserInfo","updateUser","UserInfo","user","setUser","account","setAccount","description","setDescription","icon","setIcon","iconId","setIconId","iconControl","setIconControl","loading","setLoading","imageUrl","setImageUrl","introduction","setIntroduction","userApi","handleOk","userId","handleCancel","showModal","LoadingOutlined","src","avatar","RightOutlined","warn","onBlur","Icon","Icons","shape","footer","showSearch","filterOption","input","option","toLowerCase","indexOf","icons","index","TempIcon","getAdverts","AdvertMng","advertList","setAdvertList","advertApi","deleteAdvert","listType","advert","alt","PlusOutlined","Content","Layout","Footer","Sider","SubMenu","Menu","AdminIndex","temp","location","pathname","replace","collapsed","setCollapsed","minHeight","collapsible","position","overflow","left","onCollapse","theme","defaultOpenKeys","defaultSelectedKeys","selectedKeys","mode","to","PieChartOutlined","UserOutlined","DesktopOutlined","EditOutlined","SnippetsOutlined","FileOutlined","margin","padding","path","exact","component","textAlign","Main","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.26d4cea3.chunk.js","sourcesContent":["import axios from \"axios\";\r\nlet baseUrl;\r\nif (process.env.NODE_ENV === \"development\") {\r\n  baseUrl = \"http://localhost:7001/admin/\";\r\n} else {\r\n  baseUrl = \"http://112.74.35.49:7001/admin/\";\r\n}\r\nexport function getBaseUrl() {\r\n  return baseUrl;\r\n}\r\nexport default function(config) {\r\n  if (!config.url) {\r\n    throw Error(\"need url\");\r\n  }\r\n  if (config.url[0] !== \"/\") {\r\n    config.url = baseUrl + config.url;\r\n  } else {\r\n    config.url = baseUrl + config.url.substring(1);\r\n  }\r\n  return axios(config);\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { Card, Input, Button, Spin, message } from \"antd\";\r\nimport \"../static/Login.css\";\r\nimport * as articleApi from \"../api/articleApi\";\r\n\r\nfunction Login(props) {\r\n  const [userName, setUserName] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [inloading, setInloading] = useState(false);\r\n  const checkLogin = () => {\r\n    if (!userName) {\r\n      message.error(\"用户名不能为空\");\r\n      return false;\r\n    }\r\n    if (!password) {\r\n      message.error(\"密码不能为空\");\r\n      return false;\r\n    }\r\n    setInloading(true);\r\n    articleApi.checkLogin(userName, password).then(res => {\r\n      if (res.data.data === \"登陆成功\") {\r\n        message.success(\"登陆成功\");\r\n        localStorage.setItem(\"openId\", res.data.openId);\r\n        props.history.push(\"/index\");\r\n      } else {\r\n        message.error(\"用户名或密码错误\");\r\n      }\r\n      setInloading(false);\r\n    });\r\n  };\r\n  return (\r\n    <div className=\"login-div\">\r\n      <Spin tip=\"Loading...\" spinning={inloading}>\r\n        <Card title=\"Blog System\" bordered={true} style={{ width: 400 }}>\r\n          <Input\r\n            id=\"userName\"\r\n            size=\"large\"\r\n            placeholder=\"Enter your username\"\r\n            onChange={e => {\r\n              setUserName(e.target.value);\r\n            }}\r\n          ></Input>\r\n          <br />\r\n          <br />\r\n          <Input\r\n            id=\"password\"\r\n            size=\"large\"\r\n            placeholder=\"Enter your password\"\r\n            type=\"password\"\r\n            onChange={e => {\r\n              setPassword(e.target.value);\r\n            }}\r\n          ></Input>\r\n          <br />\r\n          <br />\r\n          <Button type=\"primary\" size=\"large\" block onClick={checkLogin}>\r\n            Login\r\n          </Button>\r\n        </Card>\r\n      </Spin>\r\n    </div>\r\n  );\r\n}\r\nexport default Login;\r\n","import request from \"./request\";\r\n\r\nexport function checkLogin(userName, password) {\r\n  return request({\r\n    url: \"/checkLogin\",\r\n    method: \"post\",\r\n    data: { userName, password },\r\n    withCredentials: true\r\n  });\r\n}\r\nexport function getTypeInfo() {\r\n  return request({\r\n    url: \"/getTypeInfo\",\r\n    method: \"get\",\r\n    withCredentials: true\r\n  });\r\n}\r\nexport function addArticle(data) {\r\n  return request({\r\n    url: \"/addArticle\",\r\n    method: \"post\",\r\n    data,\r\n    withCredentials: true\r\n  });\r\n}\r\nexport function updateArticle(data) {\r\n  return request({\r\n    url: \"/updateArticle\",\r\n    method: \"post\",\r\n    data,\r\n    withCredentials: true\r\n  });\r\n}\r\nexport function getArticleList() {\r\n  return request({\r\n    url: \"/getArticleList\",\r\n    method: \"get\",\r\n    withCredentials: true\r\n  });\r\n}\r\nexport function deleteArticle(id) {\r\n  return request({\r\n    url: \"/deleteArticle/\" + id,\r\n    method: \"get\",\r\n    withCredentials: true\r\n  });\r\n}\r\nexport function getArticleById(id) {\r\n  return request({\r\n    url: \"/getArticleById/\" + id,\r\n    method: \"get\",\r\n    withCredentials: true\r\n  });\r\n}\r\n","import { Input, Modal, Button, Upload, message, Row, Col } from \"antd\";\r\nimport React, { useState } from \"react\";\r\nimport { getBaseUrl } from \"../api/request\";\r\n\r\nexport default function(props) {\r\n  const [imgUrl, setImgUrl] = useState(\"\");\r\n  const imgUrlHandler = function(e) {\r\n    setImgUrl(e.target.value);\r\n  };\r\n  const upload = function() {};\r\n  const baseUrl = getBaseUrl();\r\n  const handleFile = info => {\r\n    if (info.file.status === \"uploading\") {\r\n      return;\r\n    }\r\n    if (info.file.status === \"done\") {\r\n      const url = new URL(baseUrl);\r\n      const tempUrl = url.origin + info.file.response.url;\r\n      setImgUrl(tempUrl);\r\n    }\r\n  };\r\n  const beforeUpload = function(file) {\r\n    const isJpgOrPng = file.type === \"image/jpeg\" || file.type === \"image/png\";\r\n    if (!isJpgOrPng) {\r\n      message.error(\"You can only upload JPG/PNG file!\");\r\n    }\r\n    const isLt2M = file.size / 1024 / 1024 < 2;\r\n    if (!isLt2M) {\r\n      message.error(\"Image must smaller than 2MB!\");\r\n    }\r\n    return isJpgOrPng && isLt2M;\r\n  };\r\n  const handleOk = () => {\r\n    props.onOk(imgUrl);\r\n  };\r\n  return (\r\n    <Modal\r\n      cancelText=\"取消\"\r\n      okText=\"确认\"\r\n      title=\"上传图片\"\r\n      visible={props.visible}\r\n      onOk={handleOk}\r\n      onCancel={props.onCancel}\r\n    >\r\n      <Row>\r\n        <Col\r\n          span={4}\r\n          style={{\r\n            display: \"inline-flex\",\r\n            alignItems: \"center\",\r\n            paddingRight: \"5px\",\r\n            justifyContent: \"flex-end\"\r\n          }}\r\n        >\r\n          <span>图片地址</span>\r\n        </Col>\r\n        <Col span={16}>\r\n          <Input value={imgUrl} onChange={imgUrlHandler}></Input>\r\n        </Col>\r\n        <Col span={4}>\r\n          <Upload\r\n            name=\"file\"\r\n            showUploadList={false}\r\n            action={baseUrl + \"upload\"}\r\n            onChange={handleFile}\r\n            beforeUpload={beforeUpload}\r\n          >\r\n            <Button onClick={upload}>本地上传</Button>\r\n          </Upload>\r\n        </Col>\r\n      </Row>\r\n    </Modal>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Button, Row, Col, Input, Select, DatePicker, message } from \"antd\";\r\nimport \"../static/AddArticle.css\";\r\nimport marked from \"marked\";\r\nimport hljs from \"highlight.js\";\r\nimport moment from \"moment\";\r\nimport * as articleApi from \"../api/articleApi\";\r\nimport ImageModal from \"../components/ImageModal\";\r\nimport { FileImageOutlined } from \"@ant-design/icons\";\r\nconst { Option } = Select;\r\nconst { TextArea } = Input;\r\n\r\nconst renderer = new marked.Renderer();\r\nmarked.setOptions({\r\n  renderer: renderer,\r\n  gfm: true,\r\n  pedantic: false,\r\n  sanitize: false,\r\n  tables: true,\r\n  breaks: false,\r\n  smartLists: true,\r\n  highlight: function(code) {\r\n    return hljs.highlightAuto(code).value;\r\n  }\r\n});\r\n\r\nexport default function AddArticle(props) {\r\n  const [articleId, setArticleId] = useState(0); // 文章的ID，如果是0说明是新增加，如果不是0，说明是修改\r\n  const [articleTitle, setArticleTitle] = useState(\"\"); //文章标题\r\n  const [articleContent, setArticleContent] = useState(\"\"); //markdown的编辑内容\r\n  const [markdownContent, setMarkdownContent] = useState(\"预览内容\"); //html内容\r\n  const [introduce, setIntroduce] = useState(); //简介的markdown内容\r\n  const [introducehtml, setIntroducehtml] = useState(\"等待编辑\"); //简介的html内容\r\n  const [showDate, setShowDate] = useState(moment()); //发布日期\r\n  const [typeInfo, setTypeInfo] = useState([]); // 文章类别信息\r\n  const [selectedType, setSelectType] = useState(); //选择的文章类别\r\n  const [orderIndex, setOrderIndex] = useState(1);\r\n  const getArticleById = id => {\r\n    articleApi.getArticleById(id).then(res => {\r\n      const articleInfo = res.data.data[0];\r\n      setArticleId(articleInfo.id);\r\n      setArticleTitle(articleInfo.title);\r\n      setArticleContent(articleInfo.article_content);\r\n      //marked太耗cpu，会阻塞侧边栏菜单选择切换动画，暂时setTimeout解决\r\n      setTimeout(() => {\r\n        let html = marked(articleInfo.article_content || \"\");\r\n        setMarkdownContent(html);\r\n        setIntroduce(articleInfo.introduce);\r\n        let tempInt = marked(articleInfo.introduce || \"\");\r\n        setIntroducehtml(tempInt);\r\n      }, 300);\r\n      setShowDate(moment(articleInfo.addTime));\r\n      setSelectType(articleInfo.typeId);\r\n      setOrderIndex(articleInfo.orderIndex);\r\n    });\r\n  };\r\n  const changeContent = e => {\r\n    setArticleContent(e.target.value);\r\n    const html = marked(e.target.value || \"\");\r\n    setMarkdownContent(html);\r\n  };\r\n  const changeIntroduce = e => {\r\n    setIntroduce(e.target.value);\r\n    const html = marked(e.target.value || \"\");\r\n    setIntroducehtml(html);\r\n  };\r\n  const changeTitle = e => {\r\n    setArticleTitle(e.target.value);\r\n  };\r\n  const getTypeInfo = () => {\r\n    articleApi.getTypeInfo().then(res => {\r\n      if (res.data.data === \"没有登录\") {\r\n        localStorage.removeItem(\"openId\");\r\n        props.history.push(\"/\");\r\n      } else {\r\n        setTypeInfo(res.data.data);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getTypeInfo();\r\n    let tmpId = props.match.params.id;\r\n    if (tmpId) {\r\n      getArticleById(tmpId);\r\n    } else {\r\n      getLocalData();\r\n    }\r\n  }, [props.match.params.id]);\r\n  const selectTypeHandler = value => {\r\n    setSelectType(value);\r\n  };\r\n  const dateChangeHander = date => {\r\n    setShowDate(date);\r\n  };\r\n  const localSave = () => {\r\n    let dataProps = {};\r\n    dataProps.selectedType = selectedType;\r\n    dataProps.articleTitle = articleTitle;\r\n    dataProps.articleContent = articleContent;\r\n    dataProps.introduce = introduce;\r\n    dataProps.showDate = showDate.unix();\r\n    dataProps.orderIndex = orderIndex;\r\n    let localData = JSON.stringify(dataProps);\r\n    localStorage.setItem(\"localData\", localData);\r\n    message.success(\"暂存成功\");\r\n  };\r\n  const getLocalData = () => {\r\n    let localData = localStorage.getItem(\"localData\");\r\n    if (localData) {\r\n      let dataProps = JSON.parse(localData);\r\n      setArticleTitle(dataProps.articleTitle);\r\n      setArticleContent(dataProps.articleContent);\r\n      let html = marked(dataProps.articleContent || \"\");\r\n      setMarkdownContent(html);\r\n      setIntroduce(dataProps.introduce);\r\n      let tempInt = marked(dataProps.introduce || \"\");\r\n      setIntroducehtml(tempInt);\r\n      setShowDate(moment(dataProps.showDate * 1000));\r\n      setSelectType(dataProps.selectedType);\r\n      setOrderIndex(dataProps.orderIndex);\r\n    }\r\n  };\r\n  const saveArticle = () => {\r\n    if (!selectedType) {\r\n      message.error(\"文章类型不能为空\");\r\n      return false;\r\n    } else if (!articleTitle) {\r\n      message.error(\"文章名称不能为空\");\r\n      return false;\r\n    } else if (!articleContent) {\r\n      message.error(\"文章内容不能为空\");\r\n      return false;\r\n    } else if (!introduce) {\r\n      message.error(\"文章简介不能为空\");\r\n      return false;\r\n    } else if (!showDate) {\r\n      message.error(\"发布日期不能为空\");\r\n      return false;\r\n    }\r\n    let dataProps = {};\r\n    dataProps.type_id = selectedType;\r\n    dataProps.title = articleTitle;\r\n    dataProps.article_content = articleContent;\r\n    dataProps.introduce = introduce;\r\n    dataProps.orderIndex = orderIndex;\r\n    let date = showDate;\r\n    if (date) {\r\n      const nowDate = new Date();\r\n      //设置时间\r\n      date.hour(nowDate.getHours());\r\n      date.minute(nowDate.getMinutes());\r\n      date.second(nowDate.getSeconds());\r\n    }\r\n    dataProps.addTime = date.utc(8).unix();\r\n    if (articleId === 0) {\r\n      dataProps.view_count = 0;\r\n      articleApi.addArticle(dataProps).then(res => {\r\n        setArticleId(res.data.insertId);\r\n        if (res.data.isSuccess) {\r\n          message.success(\"保存成功\");\r\n        } else {\r\n          message.error(\"保存失败\");\r\n        }\r\n      });\r\n    } else {\r\n      dataProps.id = articleId;\r\n      articleApi.updateArticle(dataProps).then(res => {\r\n        if (res.data.isSuccess) {\r\n          message.success(\"修改成功\");\r\n        } else {\r\n          message.error(\"修改失败\");\r\n        }\r\n      });\r\n    }\r\n  };\r\n  const selectOrderIndexHandler = value => {\r\n    setOrderIndex(value);\r\n  };\r\n  const [visible, setVisible] = useState(false);\r\n  const handleToolBar = () => {\r\n    setVisible(true);\r\n  };\r\n  const handleCancel = () => {\r\n    setVisible(false);\r\n  };\r\n  const handleOk = imgUrl => {\r\n    const newArticleContent = articleContent + `![image](${imgUrl})`;\r\n    setArticleContent(newArticleContent);\r\n    setMarkdownContent(marked(newArticleContent || \"\"));\r\n    setVisible(false);\r\n  };\r\n  return (\r\n    <div>\r\n      <Row gutter={5}>\r\n        <Col span={18}>\r\n          <Row gutter={10} style={{ marginBottom: \"10px\" }}>\r\n            <Col span={12}>\r\n              <Input\r\n                placeholder=\"博客标题\"\r\n                size=\"large\"\r\n                onChange={changeTitle}\r\n                value={articleTitle}\r\n              ></Input>\r\n            </Col>\r\n            <Col span={4}>\r\n              <Select\r\n                placeholder=\"请选择类型\"\r\n                onChange={selectTypeHandler}\r\n                value={selectedType}\r\n                size=\"large\"\r\n                style={{ minWidth: \"130px\" }}\r\n              >\r\n                {typeInfo.map(item => {\r\n                  return (\r\n                    <Option key={item.id} value={item.id}>\r\n                      {item.typeName}\r\n                    </Option>\r\n                  );\r\n                })}\r\n              </Select>\r\n            </Col>\r\n            <Col span={4}>\r\n              <Select\r\n                placeholder=\"请设置优先级\"\r\n                value={orderIndex}\r\n                onChange={selectOrderIndexHandler}\r\n                size=\"large\"\r\n                style={{ minWidth: \"130px\" }}\r\n              >\r\n                <Option key={0} value={0}>\r\n                  置顶\r\n                </Option>\r\n                <Option key={1} value={1}>\r\n                  普通\r\n                </Option>\r\n                })}\r\n              </Select>\r\n            </Col>\r\n            <Col span={4}>\r\n              <div className=\"date-select\">\r\n                <DatePicker\r\n                  onChange={dateChangeHander}\r\n                  placeholder=\"发布日期\"\r\n                  size=\"large\"\r\n                  value={!showDate ? undefined : moment(showDate)}\r\n                ></DatePicker>\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n          <Row className=\"toolbar\">\r\n            <Col span={1}>\r\n              <span>\r\n                <FileImageOutlined\r\n                  style={{ fontSize: \"20px\" }}\r\n                  onClick={handleToolBar}\r\n                />\r\n              </span>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col span={12}>\r\n              <TextArea\r\n                className=\"markdown-content\"\r\n                rows={30}\r\n                placeholder=\"文章内容\"\r\n                value={articleContent}\r\n                onChange={changeContent}\r\n              ></TextArea>\r\n            </Col>\r\n            <Col span={12}>\r\n              <div\r\n                className=\"show-html\"\r\n                style={{ marginLeft: \"5px\" }}\r\n                dangerouslySetInnerHTML={{ __html: markdownContent }}\r\n              ></div>\r\n            </Col>\r\n          </Row>\r\n        </Col>\r\n        <Col span={6}>\r\n          <Row>\r\n            <Col span={24}>\r\n              <Button size=\"large\" onClick={localSave}>\r\n                暂存文章\r\n              </Button>\r\n              <Button\r\n                type=\"primary\"\r\n                size=\"large\"\r\n                style={{ marginLeft: \"5px\" }}\r\n                onClick={saveArticle}\r\n              >\r\n                {articleId === 0 ? \"发布文章\" : \"修改文章\"}\r\n              </Button>\r\n            </Col>\r\n            <Col span={24} style={{ marginTop: \"10px\" }}>\r\n              <TextArea\r\n                row={4}\r\n                placeholder=\"文章简介\"\r\n                onChange={changeIntroduce}\r\n                value={introduce}\r\n              ></TextArea>\r\n              <div\r\n                style={{ marginTop: \"10px\" }}\r\n                className=\"introduce-html\"\r\n                dangerouslySetInnerHTML={{ __html: introducehtml }}\r\n              ></div>\r\n            </Col>\r\n          </Row>\r\n        </Col>\r\n      </Row>\r\n      <ImageModal\r\n        visible={visible}\r\n        onCancel={handleCancel}\r\n        onOk={handleOk}\r\n      ></ImageModal>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { List, Row, Col, Modal, message, Button } from \"antd\";\r\nimport \"../static/ArticleList.css\";\r\nimport * as articleApi from \"../api/articleApi\";\r\nconst { confirm } = Modal;\r\n\r\nexport default function ArticleList(props) {\r\n  const [list, setList] = useState([]);\r\n  const getList = () => {\r\n    articleApi.getArticleList().then(res => {\r\n      setList(res.data.data);\r\n    });\r\n  };\r\n  useEffect(() => {\r\n    getList();\r\n  }, []);\r\n  const delArticle = id => {\r\n    confirm({\r\n      title: \"确认是否删除\",\r\n      content: \"如果你点击OK，文章将永远被删除，无法恢复\",\r\n      cancelText: \"取消\",\r\n      okText: \"确认\",\r\n      onOk() {\r\n        return new Promise((resolve, reject) => {\r\n          articleApi.deleteArticle(id).then(res => {\r\n            message.success(\"文章删除\");\r\n            getList();\r\n            resolve();\r\n          });\r\n        });\r\n      },\r\n      onCancel() {\r\n        message.success(\"取消\");\r\n      }\r\n    });\r\n  };\r\n  const updateArticle = id => {\r\n    props.history.push(\"/index/add/\" + id);\r\n  };\r\n  return (\r\n    <div>\r\n      <List\r\n        header={\r\n          <Row className=\"list-div\">\r\n            <Col span={8}>\r\n              <b>标题</b>\r\n            </Col>\r\n            <Col span={4}>\r\n              <b>类别</b>\r\n            </Col>\r\n            <Col span={4}>\r\n              <b>发布时间</b>\r\n            </Col>\r\n            <Col span={4}>\r\n              <b>浏览量</b>\r\n            </Col>\r\n            <Col span={4}>\r\n              <b>操作</b>\r\n            </Col>\r\n          </Row>\r\n        }\r\n        bordered\r\n        dataSource={list}\r\n        renderItem={item => (\r\n          <List.Item>\r\n            <Row className=\"list-div\">\r\n              <Col span={8}>{item.title}</Col>\r\n              <Col span={4}>{item.typeName}</Col>\r\n              <Col span={4}>{item.addTime}</Col>\r\n              <Col span={4}>{item.view_count}</Col>\r\n              <Col span={4}>\r\n                <Button\r\n                  type=\"primary\"\r\n                  style={{ marginRight: \"5px\" }}\r\n                  onClick={() => {\r\n                    updateArticle(item.id);\r\n                  }}\r\n                >\r\n                  修改\r\n                </Button>\r\n                <Button\r\n                  type=\"danger\"\r\n                  onClick={() => {\r\n                    delArticle(item.id);\r\n                  }}\r\n                >\r\n                  删除\r\n                </Button>\r\n              </Col>\r\n            </Row>\r\n          </List.Item>\r\n        )}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import request from \"./request\";\r\nexport function getUserInfo() {\r\n  return request({ url: \"/getUserInfo\", method: \"get\", withCredentials: true });\r\n}\r\nexport function addAccount(data) {\r\n  return request({\r\n    url: \"/addAccount\",\r\n    method: \"post\",\r\n    withCredentials: true,\r\n    data\r\n  });\r\n}\r\nexport function updateAccount(data) {\r\n  return request({\r\n    url: \"/updateAccount\",\r\n    method: \"post\",\r\n    withCredentials: true,\r\n    data\r\n  });\r\n}\r\nexport function deleteAccount(id) {\r\n  return request({\r\n    url: \"/deleteAccount/\" + id,\r\n    method: \"delete\",\r\n    withCredentials: true\r\n  });\r\n}\r\nexport function updateUser(data) {\r\n  return request({\r\n    url: \"/updateUser\",\r\n    method: \"post\",\r\n    data,\r\n    withCredentials: true\r\n  });\r\n}\r\n","export default [\r\n  \"AndroidOutlined\",\r\n  \"AppleOutlined\",\r\n  \"WindowsOutlined\",\r\n  \"IeOutlined\",\r\n  \"ChromeOutlined\",\r\n  \"GithubOutlined\",\r\n  \"AliwangwangOutlined\",\r\n  \"DingdingOutlined\",\r\n  \"WeiboOutlined\",\r\n  \"TaobaoCircleOutlined\",\r\n  \"Html5Outlined\",\r\n  \"TwitterOutlined\",\r\n  \"WechatOutlined\",\r\n  \"YoutubeOutlined\",\r\n  \"AlipayCircleOutlined\",\r\n  \"TaobaoOutlined\",\r\n  \"SkypeOutlined\",\r\n  \"QqOutlined\",\r\n  \"MediumWorkmarkOutlined\",\r\n  \"GitlabOutlined\",\r\n  \"MediumOutlined\",\r\n  \"LinkedinOutlined\",\r\n  \"GooglePlusOutlined\",\r\n  \"DropboxOutlined\",\r\n  \"FacebookOutlined\",\r\n  \"CodepenOutlined\",\r\n  \"CodeSandboxOutlined\",\r\n  \"AmazonOutlined\",\r\n  \"GoogleOutlined\",\r\n  \"CodepenCircleOutlined\",\r\n  \"AlipayOutlined\",\r\n  \"AntDesignOutlined\",\r\n  \"AntCloudOutlined\",\r\n  \"AliyunOutlined\",\r\n  \"ZhihuOutlined\",\r\n  \"SlackOutlined\",\r\n  \"BehanceOutlined\",\r\n  \"DribbbleOutlined\",\r\n  \"InstagramOutlined\",\r\n  \"YuqueOutlined\",\r\n  \"YahooOutlined\",\r\n  \"RedditOutlined\",\r\n  \"SketchOutlined\"\r\n];\r\n","import React from \"react\";\r\nimport {\r\n  Avatar,\r\n  Divider,\r\n  Button,\r\n  Modal,\r\n  Input,\r\n  Select,\r\n  message,\r\n  Upload\r\n} from \"antd\";\r\nimport { useEffect, useState } from \"react\";\r\nimport \"../static/UserInfo.css\";\r\nimport * as Icons from \"@ant-design/icons\";\r\nimport * as userApi from \"../api/userApi\";\r\nimport icons from \"../tools/icons\";\r\nimport {\r\n  LoadingOutlined,\r\n  PlusOutlined,\r\n  RightOutlined\r\n} from \"@ant-design/icons\";\r\nimport { getBaseUrl } from \"../api/request\";\r\nexport default function UserInfo() {\r\n  const [user, setUser] = useState({});\r\n  const [visible, setVisible] = useState(false);\r\n  const [account, setAccount] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [icon, setIcon] = useState(\"\");\r\n  const [iconId, setIconId] = useState();\r\n  const [iconControl, setIconControl] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const [imageUrl, setImageUrl] = useState(\"\");\r\n  const [introduction, setIntroduction] = useState(\"\");\r\n  const baseUrl = getBaseUrl();\r\n  useEffect(() => {\r\n    userApi.getUserInfo().then(res => {\r\n      setUser(res.data.data);\r\n      setIntroduction(res.data.data.introduction);\r\n    });\r\n  }, []);\r\n  const handleOk = () => {\r\n    if (!account) {\r\n      message.error(\"账号地址不能为空\");\r\n      return;\r\n    }\r\n    if (!icon) {\r\n      message.error(\"图标不能为空\");\r\n      return;\r\n    }\r\n\r\n    const data = {\r\n      account,\r\n      icon,\r\n      userId: user.id,\r\n      description\r\n    };\r\n    //添加\r\n    if (iconControl === 0) {\r\n      userApi.addAccount(data).then(res => {\r\n        if (res.data.success) {\r\n          message.success(\"添加成功\");\r\n          userApi.getUserInfo().then(res => {\r\n            setUser(res.data.data);\r\n            setIntroduction(res.data.data.introduction);\r\n          });\r\n        } else {\r\n          message.error(\"添加失败\");\r\n        }\r\n      });\r\n    } else {\r\n      data.id = iconId;\r\n      userApi.updateAccount(data).then(res => {\r\n        if (res.data.success) {\r\n          message.success(\"更新成功\");\r\n          userApi.getUserInfo().then(res => {\r\n            setUser(res.data.data);\r\n            setIntroduction(res.data.data.introduction);\r\n          });\r\n        } else {\r\n          message.error(\"更新失败\");\r\n        }\r\n      });\r\n    }\r\n\r\n    setVisible(false);\r\n  };\r\n  const handleCancel = () => {\r\n    setVisible(false);\r\n  };\r\n  const deleteAccount = () => {\r\n    userApi.deleteAccount(iconId).then(res => {\r\n      setVisible(false);\r\n      if (res.data.success) {\r\n        message.success(\"删除成功\");\r\n        userApi.getUserInfo().then(res => {\r\n          setUser(res.data.data);\r\n        });\r\n      } else {\r\n        message.error(\"删除失败\");\r\n      }\r\n    });\r\n  };\r\n  const showModal = (e, item) => {\r\n    if (item) {\r\n      setAccount(item.account);\r\n      setIcon(item.icon);\r\n      setDescription(item.description);\r\n      setIconControl(1);\r\n      setIconId(item.id);\r\n    } else {\r\n      setIconControl(0);\r\n    }\r\n    setVisible(true);\r\n  };\r\n\r\n  const beforeUpload = function(file) {\r\n    const isJpgOrPng = file.type === \"image/jpeg\" || file.type === \"image/png\";\r\n    if (!isJpgOrPng) {\r\n      message.error(\"You can only upload JPG/PNG file!\");\r\n    }\r\n    const isLt2M = file.size / 1024 / 1024 < 2;\r\n    if (!isLt2M) {\r\n      message.error(\"Image must smaller than 2MB!\");\r\n    }\r\n    return isJpgOrPng && isLt2M;\r\n  };\r\n  const handleFile = info => {\r\n    if (info.file.status === \"uploading\") {\r\n      setLoading(true);\r\n      return;\r\n    }\r\n    if (info.file.status === \"done\") {\r\n      setLoading(false);\r\n      const url = new URL(baseUrl);\r\n      setImageUrl(url.origin + info.file.response.url);\r\n    }\r\n  };\r\n  const handleAvatarChange = () => {\r\n    userApi.updateUser({ avatar: imageUrl }).then(res => {\r\n      if (res.data.success) {\r\n        userApi.getUserInfo().then(res => {\r\n          setUser(res.data.data);\r\n        });\r\n        setImageUrl(\"\");\r\n        message.success(\"保存成功\");\r\n      } else {\r\n        message.warn(\"保存失败\");\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleIntroChange = value => {\r\n    userApi.updateUser({ introduction }).then(res => {\r\n      if (res.data.success) {\r\n        userApi.getUserInfo().then(res => {\r\n          setUser(res.data.data);\r\n        });\r\n        setImageUrl(\"\");\r\n        message.success(\"保存成功\");\r\n      } else {\r\n        message.warn(\"保存失败\");\r\n      }\r\n    });\r\n  };\r\n  return (\r\n    <div className=\"author-div comm-box\">\r\n      <div>\r\n        <Divider>头像</Divider>\r\n        <Upload\r\n          name=\"avatar\"\r\n          className=\"avatar-uploader\"\r\n          showUploadList={false}\r\n          action={baseUrl + \"upload\"}\r\n          onChange={handleFile}\r\n          beforeUpload={beforeUpload}\r\n        >\r\n          {loading && <LoadingOutlined />}\r\n          <Avatar className=\"avatar\" size={100} src={user.avatar}></Avatar>\r\n          {!imageUrl && (\r\n            <div className=\"confirm-replace\">\r\n              <Button>更换头像</Button>\r\n            </div>\r\n          )}\r\n        </Upload>\r\n        {imageUrl && (\r\n          <>\r\n            <RightOutlined />\r\n            <RightOutlined />\r\n            <RightOutlined />\r\n            <Avatar\r\n              className=\"history-avatar\"\r\n              size={100}\r\n              src={imageUrl}\r\n            ></Avatar>\r\n            <div className=\"confirm-replace\">\r\n              <Button onClick={handleAvatarChange}>确认替换</Button>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n      <div className=\"author-introduction\">\r\n        <Input\r\n        className=\"intro\"\r\n          value={introduction}\r\n          onChange={e => {\r\n            setIntroduction(e.target.value);\r\n          }}\r\n          onBlur={handleIntroChange}\r\n        ></Input>\r\n        <Divider>社交账号</Divider>\r\n        {user.account &&\r\n          user.account.map(item => {\r\n            const Icon = Icons[item.icon];\r\n            return (\r\n              // <a key={item.id} target=\"_blank\" href={item.account}>\r\n              <Avatar\r\n                key={item.id}\r\n                onClick={e => {\r\n                  showModal(e, item);\r\n                }}\r\n                size={28}\r\n                icon={<Icon />}\r\n                className=\"account\"\r\n              />\r\n            );\r\n          })}\r\n        <Button\r\n          className=\"add-btn\"\r\n          onClick={showModal}\r\n          icon={<Icons.PlusOutlined />}\r\n          type=\"primary\"\r\n          shape=\"circle\"\r\n        ></Button>\r\n      </div>\r\n      <Modal\r\n        title={iconControl === 0 ? \"添加账号\" : \"更新账号\"}\r\n        visible={visible}\r\n        onOk={handleOk}\r\n        onCancel={handleCancel}\r\n        cancelText=\"取消\"\r\n        okText={iconControl === 0 ? \"添加\" : \"更新\"}\r\n        footer={[\r\n          iconControl === 1 ? (\r\n            <Button key=\"1\" type=\"danger\" onClick={deleteAccount}>\r\n              删除\r\n            </Button>\r\n          ) : (\r\n            <Button key=\"1\" onClick={handleCancel}>\r\n              取消\r\n            </Button>\r\n          ),\r\n          <Button key=\"3\" type=\"primary\" onClick={handleOk}>\r\n            {iconControl === 0 ? \"添加\" : \"更新\"}\r\n          </Button>\r\n        ]}\r\n      >\r\n        <div style={{ marginBottom: 16 }}>\r\n          <Input\r\n            placeholder=\"账号地址\"\r\n            value={account}\r\n            onChange={e => {\r\n              setAccount(e.target.value);\r\n            }}\r\n          ></Input>\r\n        </div>\r\n        <div style={{ marginBottom: 16 }}>\r\n          <Select\r\n            showSearch\r\n            style={{ width: \"100%\" }}\r\n            placeholder=\"账号图标\"\r\n            onChange={value => {\r\n              setIcon(value);\r\n            }}\r\n            value={icon}\r\n            filterOption={(input, option) => {\r\n              return (\r\n                option.value.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n              );\r\n            }}\r\n          >\r\n            {icons.map((item, index) => {\r\n              let TempIcon = Icons[item];\r\n              return (\r\n                <Select.Option key={index} value={item}>\r\n                  {TempIcon && <TempIcon />} {item}\r\n                </Select.Option>\r\n              );\r\n            })}\r\n          </Select>\r\n        </div>\r\n        <div style={{ marginBottom: 16 }}>\r\n          <Input\r\n            placeholder=\"账号描述\"\r\n            value={description}\r\n            onChange={e => {\r\n              setDescription(e.target.value);\r\n            }}\r\n          ></Input>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n","import request from \"./request\";\r\nexport function getAdverts() {\r\n  return request({\r\n    url: \"/getAdverts\",\r\n    method: \"get\",\r\n    withCredentials: true\r\n  });\r\n}\r\nexport function deleteAdvert(id) {\r\n  return request({\r\n    url: \"/deleteAdvert/\" + id,\r\n    method: \"delete\",\r\n    withCredentials: true\r\n  });\r\n}\r\nexport function addAdvert(data) {\r\n  return request({\r\n    url: \"/addAdvert\",\r\n    method: \"post\",\r\n    withCredentials: true,\r\n    data\r\n  });\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport * as advertApi from \"../api/advertApi\";\r\nimport { getBaseUrl } from \"../api/request\";\r\nimport { List, Upload, message, Button } from \"antd\";\r\nimport { LoadingOutlined, PlusOutlined } from \"@ant-design/icons\";\r\nimport \"../static/AdvertMng.css\";\r\nexport default function AdvertMng() {\r\n  const [advertList, setAdvertList] = useState([]);\r\n  const [imageUrl, setImageUrl] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const baseUrl = getBaseUrl();\r\n  useEffect(() => {\r\n    advertApi.getAdverts().then(res => {\r\n      const data = res.data.data;\r\n      setAdvertList(data);\r\n    });\r\n  }, []);\r\n  const handleFile = info => {\r\n    if (info.file.status === \"uploading\") {\r\n      setLoading(true);\r\n      return;\r\n    }\r\n    if (info.file.status === \"done\") {\r\n      setLoading(false);\r\n      const url = new URL(baseUrl);\r\n\r\n      const tempUrl = url.origin + info.file.response.url;\r\n      setImageUrl(tempUrl);\r\n      const data = {};\r\n      data.advert = tempUrl;\r\n      advertApi.addAdvert(data).then(res => {\r\n        if (res.data.success) {\r\n          message.success(\"上传成功\");\r\n          advertApi.getAdverts().then(res => {\r\n            const data = res.data.data;\r\n            setAdvertList(data);\r\n            setImageUrl(\"\");\r\n          });\r\n        } else {\r\n          message.success(\"上传失败\");\r\n        }\r\n      });\r\n    }\r\n  };\r\n  const beforeUpload = function(file) {\r\n    const isJpgOrPng = file.type === \"image/jpeg\" || file.type === \"image/png\";\r\n    if (!isJpgOrPng) {\r\n      message.error(\"You can only upload JPG/PNG file!\");\r\n    }\r\n    const isLt2M = file.size / 1024 / 1024 < 2;\r\n    if (!isLt2M) {\r\n      message.error(\"Image must smaller than 2MB!\");\r\n    }\r\n    return isJpgOrPng && isLt2M;\r\n  };\r\n  const deleteAdvert = id => {\r\n    advertApi.deleteAdvert(id).then(res => {\r\n      if (res.data.success) {\r\n        message.success(\"删除成功\");\r\n        advertApi.getAdverts().then(res => {\r\n          const data = res.data.data;\r\n          setAdvertList(data);\r\n        });\r\n      } else {\r\n        message.success(\"删除失败\");\r\n      }\r\n    });\r\n  };\r\n  return (\r\n    <div>\r\n      <Upload\r\n        name=\"avatar\"\r\n        listType=\"picture-card\"\r\n        className=\"avatar-uploader\"\r\n        showUploadList={false}\r\n        action={baseUrl + \"upload\"}\r\n        onChange={handleFile}\r\n        beforeUpload={beforeUpload}\r\n      >\r\n        {imageUrl ? (\r\n          <img src={imageUrl} alt=\"avatar\" style={{ width: \"100%\" }} />\r\n        ) : (\r\n          <div>\r\n            {loading ? <LoadingOutlined /> : <PlusOutlined />}\r\n            <div className=\"ant-upload-text\">Upload</div>\r\n          </div>\r\n        )}\r\n      </Upload>\r\n      <List\r\n        dataSource={advertList}\r\n        renderItem={item => (\r\n          <List.Item className=\"advert-item\">\r\n            <img className=\"advert-img\" src={item.advert}></img>\r\n            <Button\r\n              type=\"danger\"\r\n              onClick={() => {\r\n                deleteAdvert(item.id);\r\n              }}\r\n            >\r\n              删除\r\n            </Button>\r\n          </List.Item>\r\n        )}\r\n      ></List>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Layout, Menu, Breadcrumb } from \"antd\";\r\nimport {\r\n  DesktopOutlined,\r\n  PieChartOutlined,\r\n  FileOutlined,\r\n  EditOutlined,\r\n  SnippetsOutlined,\r\n  UserOutlined\r\n} from \"@ant-design/icons\";\r\nimport \"../static/AdminIndex.css\";\r\nimport { Route } from \"react-router-dom\";\r\nimport AddArticle from \"./AddArticle\";\r\nimport ArticleList from \"./ArticleList\";\r\nimport { Link } from \"react-router-dom\";\r\nimport UserInfo from \"./UserInfo\";\r\nimport AdvertMng from \"./AdvertMng\";\r\nconst { Content, Footer, Sider } = Layout;\r\nconst { SubMenu } = Menu;\r\nexport default function AdminIndex(props) {\r\n  let temp = props.location.pathname;\r\n  if (temp.match(/\\/\\d+$/)) {\r\n    temp = temp.replace(/\\/\\d+$/, \"\");\r\n  }\r\n  \r\n  const [collapsed, setCollapsed] = useState(false);\r\n  const onCollapse = collapsed => {\r\n    setCollapsed(collapsed);\r\n  };\r\n  const handleClickArticle = e => {\r\n    if (e.key === \"/index/add\") {\r\n      props.history.push(\"/index/add\");\r\n    } else {\r\n      props.history.push(\"/index/list\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Layout\r\n      style={{\r\n        minHeight: \"100vh\"\r\n      }}\r\n    >\r\n      <Sider\r\n        collapsible\r\n        collapsed={collapsed}\r\n        style={{\r\n          position: \"fixed\",\r\n          minHeight: \"100vh\",\r\n          overflow: \"auto\",\r\n          left: \"0\"\r\n        }}\r\n        onCollapse={onCollapse}\r\n      >\r\n        <div className=\"logo\" />\r\n        <Menu\r\n          theme=\"dark\"\r\n          defaultOpenKeys={[\"articleControl\"]}\r\n          defaultSelectedKeys={[temp]}\r\n          selectedKeys={[temp]}\r\n          mode=\"inline\"\r\n        >\r\n          <Menu.Item key=\"/index/\">\r\n            <Link to=\"/index/\">\r\n              <PieChartOutlined />\r\n              <span>工作台</span>\r\n            </Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"/index/userInfo\">\r\n            <Link to=\"/index/userInfo\">\r\n              <UserOutlined />\r\n              <span>我的信息</span>\r\n            </Link>\r\n          </Menu.Item>\r\n          <SubMenu\r\n            key=\"articleControl\"\r\n            onClick={handleClickArticle}\r\n            title={\r\n              <span>\r\n                <DesktopOutlined />\r\n                <span>文章管理</span>\r\n              </span>\r\n            }\r\n          >\r\n            <Menu.Item key=\"/index/add\">\r\n              <EditOutlined />\r\n              <span>添加文章</span>\r\n            </Menu.Item>\r\n            <Menu.Item key=\"/index/list\">\r\n              <SnippetsOutlined />\r\n              文章列表\r\n            </Menu.Item>\r\n          </SubMenu>\r\n          <Menu.Item key=\"/index/advert\">\r\n            <Link to=\"/index/advert\">\r\n              <UserOutlined />\r\n              <span>广告管理</span>\r\n            </Link>\r\n          </Menu.Item>\r\n          <Menu.Item key=\"9\">\r\n            <FileOutlined />\r\n            <span>留言管理</span>\r\n          </Menu.Item>\r\n        </Menu>\r\n      </Sider>\r\n      <Layout className=\"site-layout\" style={{ marginLeft: 200 }}>\r\n        <Content style={{ margin: \"0 16px\" }}>\r\n          <Breadcrumb style={{ margin: \"16px 0\" }}>\r\n            <Breadcrumb.Item>后台管理系统</Breadcrumb.Item>\r\n            <Breadcrumb.Item>工作台</Breadcrumb.Item>\r\n          </Breadcrumb>\r\n          <div\r\n            className=\"site-layout-background\"\r\n            style={{ padding: 24, minHeight: 360 }}\r\n          >\r\n            <div>\r\n              <Route path=\"/index/add/\" exact component={AddArticle}></Route>\r\n              <Route path=\"/index/add/:id\" exact component={AddArticle}></Route>\r\n              <Route path=\"/index/list/\" exact component={ArticleList}></Route>\r\n              <Route path=\"/index/userInfo\" exact component={UserInfo}></Route>\r\n              <Route path=\"/index/advert\" exact component={AdvertMng}></Route>\r\n              <Route path=\"/index/\" exact component={ArticleList}></Route>\r\n            </div>\r\n          </div>\r\n        </Content>\r\n        <Footer style={{ textAlign: \"center\" }}>Newway</Footer>\r\n      </Layout>\r\n    </Layout>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\r\nimport Login from \"./Login\";\r\nimport AdminIndex from \"./AdminIndex\";\r\nexport default function Main() {\r\n  return (\r\n    <div>\r\n      <Router>\r\n        <Route path=\"/\" exact component={Login}></Route>\r\n        <Route path=\"/index/\" component={AdminIndex}></Route>\r\n        <Route path=\"*\" component={() => <div>404</div>}></Route>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\nimport Main from \"./pages/Main\";\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Main></Main>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport \"antd/dist/antd.css\";\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}